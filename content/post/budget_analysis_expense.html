---
title: Budget analysis - Ministry-wise expense
author: Rushad Faridi 
date: 2018-03-11
slug: budge-analysis-expense
categories: []
tags: []
---



<p>Today I am going to have a look at ministry wise expense from budget data of Ministry of Finance of Bangladesh. In the process, we will also see how to use <code>tabulizer</code> package to import data from PDF files.</p>
<p>We are going to download the PDF from here <a href="http://http://mof.portal.gov.bd/sites/default/files/files/mof.portal.gov.bd/page/69fff6e4_953e_45d3_b96d_e89a7efa8699/St7_En.pdf" title="MOF">here</a> which consists of only two pages.</p>
<p>Now let’s load the required package <code>tabulizer</code>. In your system, if you already do not have it, then you will first have to download it using <code>install.packages()</code> command.</p>
<p>Let’s load the package first.</p>
<pre class="r"><code>library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(&quot;tabulizer&quot;)</code></pre>
<p>Now let’s start the extraction process.</p>
<pre class="r"><code>f &lt;- &quot;../RAWDATA/ministry_wise_expense.pdf&quot;
out &lt;- extract_tables(f)</code></pre>
<p>Let’s have a quick look at the structure of the extracted object:</p>
<pre class="r"><code>str(out)</code></pre>
<pre><code>## List of 3
##  $ : chr [1:45, 1:6] &quot;Code&quot; &quot;&quot; &quot;01&quot; &quot;02&quot; ...
##  $ : chr [1:24, 1:6] &quot;Code&quot; &quot;&quot; &quot;46&quot; &quot;47&quot; ...
##  $ : chr [1:16, 1:5] &quot;Net Expenditure :&quot; &quot;Deduct - Development Expenditure (Statement-VIII) :&quot; &quot;Total Non-Development Expenditure :&quot; &quot;Less - Loans &amp; Advances,Domestic &amp; Foreign Debt Repayment and :&quot; ...</code></pre>
<p>Therefore it’s a list of three elements. Probably this corresponds to the three tables in two pages. Let’s select the very first one and work on it.</p>
<pre class="r"><code>tab1  &lt;- out[[1]]</code></pre>
<p>Let’s bring the data in some manageable form.</p>
<pre class="r"><code>tab1.df &lt;- as.data.frame(tab1)
tab1.sh &lt;- tab1.df[c(1,2,4)]
names(tab1.sh) &lt;- c(&quot;code&quot;,&quot;min.div&quot;,&quot;budget.2017.18&quot;)
tab1.sh  &lt;- tab1.sh %&gt;% 
        slice(c(-1,-2))
tab1.clean &lt;- tab1.sh %&gt;% 
            mutate(budget.2017.18=gsub(&quot;,&quot;,&quot;&quot;,budget.2017.18),
               bgt.18=as.numeric(budget.2017.18),
               bgt.18=round(bgt.18/10000,0)) %&gt;% 
                    select(-budget.2017.18)</code></pre>
<p>Let’s do the same for the table from page 2.</p>
<pre class="r"><code>tab2  &lt;- out[[2]]</code></pre>
<p>Let’s bring the data in some manageable form.</p>
<pre class="r"><code>tab2.df &lt;- as.data.frame(tab2)
tab2.sh &lt;- tab2.df[c(1,2,4)]
names(tab2.sh) &lt;- c(&quot;code&quot;,&quot;min.div&quot;,&quot;budget.2017.18&quot;)
tab2.sh  &lt;- tab2.sh %&gt;% 
        slice(c(-1,-2))
tab2.clean &lt;- tab2.sh %&gt;% 
            mutate(budget.2017.18=gsub(&quot;,&quot;,&quot;&quot;,budget.2017.18),
               bgt.18=as.numeric(budget.2017.18),
               bgt.18=round(bgt.18/10000,0)) %&gt;% 
                    select(-budget.2017.18)</code></pre>
<p>Now let’s put these two tables together:</p>
<pre class="r"><code>tab.whole  &lt;- rbind(tab1.clean, tab2.clean) %&gt;% 
                   slice(1:62)</code></pre>
<p>Finally the table is ready. Now let’s check top 10 highest spending entity:</p>
<pre class="r"><code>tab.whole %&gt;% 
    arrange(desc(bgt.18)) %&gt;% 
    slice(1:10)</code></pre>
<pre><code>## # A tibble: 10 x 3
##    code  min.div                                  bgt.18
##    &lt;fct&gt; &lt;fct&gt;                                     &lt;dbl&gt;
##  1 09    Finance Division                        206531.
##  2 19    Ministry of Defence                      25741.
##  3 37    Local Government Division                24674.
##  4 25    Secondary and Higher Education Division  23148.
##  5 24    Ministry of Primary and Mass Education   22023.
##  6 50    Road  Transport and Highways Division    19697.
##  7 56    Power Division                           18894.
##  8 22    Public Security Division                 18288.
##  9 27    Health Services Division                 16203.
## 10 51    Ministry of Railways                     16135.</code></pre>
<p>Now let’s have a look into to 10 lowest spending entity</p>
<pre class="r"><code>tab.whole %&gt;% 
    arrange(bgt.18) %&gt;% 
    slice(1:10)</code></pre>
<pre><code>## # A tibble: 10 x 3
##    code  min.div                                                    bgt.18
##    &lt;fct&gt; &lt;fct&gt;                                                       &lt;dbl&gt;
##  1 01    Office of the President                                       22.
##  2 23    Legislative and Parliamentary Affairs Division                22.
##  3 20    Armed  Forces Division                                        30.
##  4 08    Public Service Commission                                     74.
##  5 04    Cabinet Division                                              95.
##  6 15    Implementation Monitoring and Evaluation Division            101.
##  7 67    Anti Corruption Commission                                   102.
##  8 61    Supreme Court                                                165.
##  9 10    Finance Division - Office of the Comptroller &amp; Auditor Ge…   196.
## 10 31    Ministry of Labour and Employment                            263.</code></pre>
<p>Let’s save the data before we leave:</p>
<pre class="r"><code>save(tab.whole, file=&quot;../RDATA/tab_whole_bgt_18.RData&quot;)</code></pre>
